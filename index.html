<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Noktra Airdrop</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="logo.png">
  <meta property="og:title" content="Noktra Airdrop">
  <meta property="og:description" content="Noktra â€” zdecentralizowany token spoÅ‚ecznoÅ›ciowy na Solanie.">
  <meta property="og:image" content="logo.png">
  <meta name="twitter:card" content="summary_large_image">
  <style>
    .linklike{background:none;border:none;color:#00ffcc;cursor:pointer;text-decoration:underline;padding:0;margin-left:8px;font:inherit}
    #toast{position:fixed;left:50%;bottom:20px;transform:translateX(-50%);background:rgba(0,0,0,.75);color:#fff;padding:8px 12px;border-radius:6px;opacity:0;pointer-events:none;transition:opacity .2s;font-size:.9rem;z-index:99999}
    #toast.show{opacity:1}
    .lightbox-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;z-index:9999}
    .lightbox-backdrop img{max-width:90vw;max-height:90vh;border-radius:8px;box-shadow:0 0 20px rgba(0,0,0,.6)}
  </style>
  <script>window.NOKTRA_BACKEND_URL="https://noktra-airdrop-6r387ygq6-noktras-projects.vercel.app/api";</script>
</head>
<body>
  <div class="top-link">
    <a href="#nft-gallery">Gallery NFT Noktra</a>
  </div>
  <div class="background"></div>
  <img src="logo.png" alt="Noktra Logo" class="corner-logo" />

  <div id="nft-gallery" class="nft-gallery">
    <h2>NFT Gallery</h2>
    <div class="nft-items">
      <div class="nft-card">
        <img src="D3897B39-FBCA-41A6-9BC2-C88AF6DD2B6B.png" alt="NFT 1">
        <p>Noktra Genesis #1</p>
      </div>
      <div class="nft-card">
        <img src="E7A36217-5496-4C3A-9439-87C9278E6F24.png" alt="NFT 2">
        <p>Noktra Genesis #2</p>
      </div>
      <div class="nft-card">
        <img src="889DE7F5-6899-4172-A704-6EC2F9E3114A.png" alt="NFT 3">
        <p>Noktra Genesis #3</p>
      </div>
    </div>
    <p class="nft-description"
       data-en="Noktra is my own project, a dream I'm realizing. Thank you for being a part of it. The token was born out of passion, faith, and the desire to create something of my own. Noktra isn't just a projectâ€”it's a feeling. Noktra will continue to growâ€”until the whole world hears about it."
       data-pl="Noktra is my own project, a dream I'm realizing. Thank you for being a part of it. The token was born out of passion, faith, and the desire to create something of my own. Noktra isn't just a projectâ€”it's a feeling. Noktra will continue to growâ€”until the whole world hears about it.">
       Noktra is my own project, a dream I'm realizing. Thank you for being a part of it. The token was born out of passion, faith, and the desire to create something of my own. Noktra isn't just a projectâ€”it's a feeling. Noktra will continue to growâ€”until the whole world hears about it.
    </p>
  </div>

  <div class="language-switcher">
    <button onclick="setLanguage('en')">ðŸ‡¬ðŸ‡§ English</button>
    <button onclick="setLanguage('pl')">ðŸ‡µðŸ‡± Polski</button>
  </div>

  <div class="container">
    <h1 data-en="Noktra Airdrop" data-pl="Airdrop Noktra">Noktra Airdrop</h1>
    <p class="description" data-en="Noktra is a decentralized community token built on Solana. No inflation. No limits. For the people."
       data-pl="Noktra to zdecentralizowany token spoÅ‚ecznoÅ›ciowy zbudowany na Solanie. Bez dodruku. Bez barier. Dla ludzi.">
       Noktra is a decentralized community token built on Solana. No inflation. No limits. For the people.
    </p>
    <div class="token-info">
      <p><strong data-en="Token" data-pl="Token">Token</strong>: NOK</p>
      <p><strong data-en="Total Supply" data-pl="PodaÅ¼">Total Supply</strong>: 1,000,000,000</p>
      <p><strong data-en="Network" data-pl="SieÄ‡">Network</strong>: Solana</p>
      <p><strong>Token Address:</strong>
        <a href="https://solscan.io/token/48QzG8RhntaiPjY7z3mPqaDiK8TxDKetBKAKMZr1TbL" target="_blank" rel="noopener" id="token-solscan">Solscan</a>
        <button type="button" id="copy-token" class="linklike" data-addr="48QzG8RhntaiPjY7z3mPqaDiK8TxDKetBKAKMZr1TbL">Kopiuj</button>
      </p>
    </div>

    <p id="counter" style="text-align:center; font-weight:bold; margin-top:0.5rem; color:#00ffcc;">ZgÅ‚oszeÅ„: 0</p>

    <form id="airdrop-form">
      <input type="text" id="address" placeholder="Solana Address" required />
      <input type="text" id="twitter" placeholder="Twitter Username" required />
      <input type="text" id="telegram" placeholder="Telegram Username" required />
      <button type="submit" data-en="Submit to Airdrop" data-pl="ZgÅ‚oÅ› siÄ™ do airdropu">Submit to Airdrop</button>
    </form>
    <p id="message"></p>
    <div class="socials">
      <a href="https://phantom.app/" target="_blank" rel="noopener">Phantom Wallet</a> |
      <a href="https://x.com/Noktra1755" target="_blank" rel="noopener">Twitter</a> |
      <a href="https://t.me/Noktra_AirDrop" target="_blank" rel="noopener">Telegram</a>
    </div>
  </div>

  <script src="script.js"></script>

  <script>
    (function(){
      const backend = (typeof window!=='undefined' && window.NOKTRA_BACKEND_URL) ? String(window.NOKTRA_BACKEND_URL) : '';
      const keyCount = 'noktra-airdrop-count';
      const keySub = 'noktra-airdrop-submissions';

      function getLocalCount(){ return parseInt(localStorage.getItem(keyCount) || '0', 10); }
      function setLocalCount(v){ localStorage.setItem(keyCount, String(v)); }
      function renderCount(v){
        var el = document.getElementById('counter');
        if(!el) return;
        var n = (typeof v==='number') ? v : getLocalCount();
        el.textContent = 'ZgÅ‚oszeÅ„: ' + n;
      }
      async function fetchGlobal(){
        if(!backend) return;
        try{
          const r = await fetch(backend.replace(/\/$/,'') + '/count');
          if(!r.ok) return;
          const d = await r.json();
          if(typeof d.count === 'number'){ setLocalCount(d.count); renderCount(d.count); }
        }catch(_){}
      }
      function isValidAddr(a){ return !!a && a.length>=32 && a.length<=60 && /^[1-9A-HJ-NP-Za-km-z]+$/.test(a); }
      function getSubmitted(){ try{ return JSON.parse(localStorage.getItem(keySub)||'{}'); }catch{return {}} }
      function saveSubmitted(m){ localStorage.setItem(keySub, JSON.stringify(m)); }
      function setMsg(t,err){ var m=document.getElementById('message'); if(!m) return; m.textContent=t; m.style.color=err?'#ff6b6b':'#00ff88'; }

      document.addEventListener('DOMContentLoaded', function(){
        renderCount();
        fetchGlobal();

        var f = document.getElementById('airdrop-form');
        if(!f) return;

        f.addEventListener('submit', async function(e){
          e.preventDefault();
          var addr = document.getElementById('address')?.value.trim();
          var tw = document.getElementById('twitter')?.value.trim();
          var tg = document.getElementById('telegram')?.value.trim();

          if(!isValidAddr(addr)) return setMsg('NieprawidÅ‚owy adres Solana.', true);
          if(!tw || !tg) return setMsg('UzupeÅ‚nij Twitter oraz Telegram.', true);

          var submitted = getSubmitted();
          if(submitted[addr]) return setMsg('Ten adres juÅ¼ zÅ‚oÅ¼yÅ‚ zgÅ‚oszenie.', true);

          try{
            if(backend){
              const r = await fetch(backend.replace(/\/$/,'') + '/submit', {
                method:'POST', headers:{'Content-Type':'application/json'},
                body: JSON.stringify({ address: addr, twitter: tw, telegram: tg })
              });
              if(r.ok){
                const d = await r.json();
                if(d?.ok && typeof d.count==='number'){
                  submitted[addr] = { tw, tg, ts: Date.now() }; saveSubmitted(submitted);
                  setLocalCount(d.count); renderCount(d.count); f.reset(); return setMsg('ZgÅ‚oszenie przyjÄ™te. DziÄ™kujemy!', false);
                }
                if(d?.error==='duplicate') return setMsg('Ten adres juÅ¼ zÅ‚oÅ¼yÅ‚ zgÅ‚oszenie.', true);
              }
            }
          }catch(_){}

          submitted[addr] = { tw, tg, ts: Date.now() }; saveSubmitted(submitted);
          setLocalCount(getLocalCount()+1); renderCount(); f.reset(); setMsg('ZgÅ‚oszenie przyjÄ™te (lokalnie).', false);
        });
      });
    })();
  </script>

  <script>
    (function(){
      const btn=document.getElementById('copy-token'); if(!btn) return;
      btn.addEventListener('click', async ()=>{
        try{ await navigator.clipboard.writeText(btn.dataset.addr); showToast('Skopiowano adres tokena'); }
        catch(_){ showToast('Nie udaÅ‚o siÄ™ skopiowaÄ‡'); }
      });
      function showToast(t){
        let el=document.getElementById('toast'); if(!el){ el=document.createElement('div'); el.id='toast'; document.body.appendChild(el); }
        el.textContent=t; el.className='show'; setTimeout(()=>{ el.className=''; },1800);
      }
    })();
  </script>

  <script>
    (function(){
      document.addEventListener('click', function(e){
        const img=e.target.closest('.nft-card img'); if(!img) return;
        e.preventDefault();
        const src=img.getAttribute('src');
        const wrap=document.createElement('div');
        wrap.className='lightbox-backdrop';
        wrap.innerHTML='<img src="'+src+'" alt="">';
        wrap.addEventListener('click',()=>wrap.remove());
        document.addEventListener('keydown',function esc(ev){ if(ev.key==='Escape'){ wrap.remove(); } },{once:true});
        document.body.appendChild(wrap);
      }, false);
    })();
  </script>
  <div id="toast"></div>
</body>
</html>
