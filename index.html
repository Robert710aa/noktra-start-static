<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Noktra Airdrop</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="logo.png">
  <link rel="preconnect" href="https://plausible.io">
  <link rel="preload" as="image" href="logo.png">
  <link rel="preload" as="image" href="D3897B39-FBCA-41A6-9BC2-C88AF6DD2B6B.png">
  <link rel="preload" as="image" href="E7A36217-5496-4C3A-9439-87C9278E6F24.png">
  <link rel="preload" as="image" href="889DE7F5-6899-4172-A704-6EC2F9E3114A.png">
  <meta property="og:title" content="Noktra Airdrop">
  <meta property="og:description" content="Noktra â€” zdecentralizowany token spoÅ‚ecznoÅ›ciowy na Solanie.">
  <meta property="og:image" content="logo.png">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Noktra1755">
  <style>
    .linklike{background:none;border:none;color:#00ffcc;cursor:pointer;text-decoration:underline;padding:0;margin-left:8px;font:inherit}
    #toast{position:fixed;left:50%;bottom:20px;transform:translateX(-50%);background:rgba(0,0,0,.75);color:#fff;padding:8px 12px;border-radius:6px;opacity:0;pointer-events:none;transition:opacity .2s;font-size:.9rem;z-index:99999}
    #toast.show{opacity:1}
    .lightbox-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;z-index:9999}
    .lightbox-backdrop img{max-width:90vw;max-height:90vh;border-radius:8px;box-shadow:0 0 20px rgba(0,0,0,.6)}
    html{scroll-behavior:smooth}
    .nft-card{transition:transform .25s ease, box-shadow .25s ease}
    .nft-card:hover{transform:translateY(-4px) scale(1.02); box-shadow:0 0 24px rgba(0,255,204,.35)}
    .reveal{opacity:0; transform:translateY(16px); transition:opacity .5s ease, transform .5s ease}
    .reveal.visible{opacity:1; transform:none}
    .share-row{margin-top:10px; text-align:center}
    .share-row a{color:#00ffcc; margin:0 8px; text-decoration:underline}
    .neon-ornament{display:flex;justify-content:center;margin:6px 0 14px}
    .neon-ornament svg{height:18px;filter:drop-shadow(0 0 8px rgba(0,255,204,.5))}
    .neon-ornament path{stroke:url(#grad-neon);stroke-width:3;fill:none;stroke-linecap:round;opacity:.9;stroke-dasharray:180;animation:dash 12s linear infinite}
    @keyframes dash{to{stroke-dashoffset:-360}}

    /* Splash: opÃ³Åºnione logo, potem tekst i wygaszenie */
    body.splash-lock{overflow:hidden}
    .splash{
      position:fixed; inset:0; z-index:100000; display:flex; flex-direction:column; align-items:center; justify-content:center;
      background:radial-gradient(60% 60% at 50% 50%, rgba(0,0,0,.35), rgba(0,0,0,.85) 60%);
      backdrop-filter:blur(2px);
      opacity:0; transition:opacity .7s ease;
    }
    .splash.show{opacity:1}
    .splash.hide{opacity:0; pointer-events:none; visibility:hidden}
    .splash .mark{
      width:min(92vmin, 96vw); height:auto;
      filter:drop-shadow(0 0 26px rgba(0,255,204,.55));
      opacity:0;
    }
    .splash.show .mark{animation:logoIn .8s ease forwards}
    @keyframes logoIn{from{transform:scale(.92);opacity:0}to{transform:scale(1);opacity:1}}
    .splash .title{
      margin-top:10px;
      font-size:clamp(18px,3.6vw,28px); color:#00ffcc; letter-spacing:1.2px; font-weight:700; text-align:center;
      text-shadow:0 0 16px rgba(0,255,204,.65), 0 0 28px rgba(0,255,204,.35);
      opacity:0;
    }
    .splash.show .title{animation:titleIn .8s ease .9s forwards}
    @keyframes titleIn{from{transform:translateY(8px);opacity:0}to{transform:none;opacity:1}}

    /* Orby neonowe pod tÅ‚em + subtelne efekty */
    .background{z-index:-2}
    .fx-orbs{
      position:fixed; inset:0; z-index:-1; pointer-events:none;
      background:
        radial-gradient(600px 600px at var(--x1,18%) var(--y1,28%), rgba(0,255,204,.12), transparent 60%),
        radial-gradient(520px 520px at var(--x2,78%) var(--y2,72%), rgba(0,200,255,.10), transparent 60%),
        radial-gradient(420px 420px at var(--x3,60%) var(--y3,18%), rgba(255,255,255,.06), transparent 55%);
      filter:blur(10px) saturate(120%);
      animation:orbsMove 22s linear infinite;
    }
    @keyframes orbsMove{
      0%{--x1:18%;--y1:28%;--x2:78%;--y2:72%;--x3:60%;--y3:18%}
      50%{--x1:30%;--y1:70%;--x2:70%;--y2:30%;--x3:80%;--y3:60%}
      100%{--x1:18%;--y1:28%;--x2:78%;--y2:72%;--x3:60%;--y3:18%}
    }
    @keyframes pulseGlow{0%,100%{box-shadow:0 0 20px rgba(0,255,204,.40)}50%{box-shadow:0 0 28px rgba(0,255,204,.60)}}
    .container{animation:pulseGlow 6s ease-in-out infinite}
    .nft-card{position:relative; overflow:hidden}
    .nft-card::after{
      content:""; position:absolute; inset:-20%;
      background:linear-gradient(75deg,transparent 0%,rgba(255,255,255,.12) 45%,rgba(255,255,255,.55) 50%,rgba(255,255,255,.12) 55%,transparent 100%);
      transform:translateX(-130%) skewX(-12deg); pointer-events:none;
    }
    .nft-card:hover::after{animation:glint 1.2s ease}
    @keyframes glint{to{transform:translateX(130%) skewX(-12deg)}}

    /* Skeleton/shimmer dla kart NFT podczas Å‚adowania obrazÃ³w */
    .nft-card.loading{position:relative; overflow:hidden}
    .nft-card.loading img{visibility:hidden}
    .nft-card.loading::before{
      content:""; display:block; width:100%; aspect-ratio:1/1;
      border-radius:0.5rem;
      background:linear-gradient(90deg, rgba(255,255,255,.08) 25%, rgba(255,255,255,.18) 50%, rgba(255,255,255,.08) 75%);
      background-size:400% 100%;
      animation:nft-shimmer 1.2s ease-in-out infinite;
    }
    @keyframes nft-shimmer{
      0%{background-position:200% 0}
      100%{background-position:-200% 0}
    }
  </style>
  <script>window.NOKTRA_BACKEND_URL="https://noktra-airdrop-6r387ygq6-noktras-projects.vercel.app/api";</script>
  <script>
    (function(){var s=document.createElement('script');s.src='https://plausible.io/js/script.js';s.defer=true;s.setAttribute('data-domain',location.hostname);document.head.appendChild(s);})();
  </script>
</head>
<body>
  <div class="top-link">
    <a href="#nft-gallery">Gallery NFT Noktra</a>
  </div>
  <div class="background"></div>
  <div class="fx-orbs" aria-hidden="true"></div>
  <img src="logo.png" alt="Noktra Logo" class="corner-logo" decoding="async" />

  <!-- Splash -->
  <div id="splash" class="splash" aria-hidden="true">
    <img class="mark" src="logo.png" alt="">
    <div class="title">NOKTRA THANKS YOU FOR BEING PART OF THE PROJECT</div>
  </div>

  <div id="nft-gallery" class="nft-gallery">
    <h2>NFT Gallery</h2>
    <div class="neon-ornament" aria-hidden="true">
      <svg viewBox="0 0 260 20" preserveAspectRatio="xMidYMid meet">
        <defs>
          <linearGradient id="grad-neon" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#00ffcc"/>
            <stop offset="50%" stop-color="#ffffff"/>
            <stop offset="100%" stop-color="#00ffcc"/>
          </linearGradient>
        </defs>
        <path d="M5 10 Q 45 0, 85 10 T 165 10 T 245 10"/>
      </svg>
    </div>
    <div class="nft-items">
      <div class="nft-card">
        <img src="D3897B39-FBCA-41A6-9BC2-C88AF6DD2B6B.png" alt="NFT 1" loading="lazy" decoding="async">
        <p>Noktra Genesis #1</p>
      </div>
      <div class="nft-card">
        <img src="E7A36217-5496-4C3A-9439-87C9278E6F24.png" alt="NFT 2" loading="lazy" decoding="async">
        <p>Noktra Genesis #2</p>
      </div>
      <div class="nft-card">
        <img src="889DE7F5-6899-4172-A704-6EC2F9E3114A.png" alt="NFT 3" loading="lazy" decoding="async">
        <p>Noktra Genesis #3</p>
      </div>
    </div>
    <p class="nft-description"
       data-en="Noktra is my own project, a dream I'm realizing. Thank you for being a part of it. The token was born out of passion, faith, and the desire to create something of my own. Noktra isn't just a projectâ€”it's a feeling. Noktra will continue to growâ€”until the whole world hears about it."
       data-pl="Noktra is my own project, a dream I'm realizing. Thank you for being a part of it. The token was born out of passion, faith, and the desire to create something of my own. Noktra isn't just a projectâ€”it's a feeling. Noktra will continue to growâ€”until the whole world hears about it.">
       Noktra is my own project, a dream I'm realizing. Thank you for being a part of it. The token was born out of passion, faith, and the desire to create something of my own. Noktra isn't just a projectâ€”it's a feeling. Noktra will continue to growâ€”until the whole world hears about it.
    </p>
    <div class="share-row">
      <a id="share-twitter" href="#" target="_blank" rel="noopener">UdostÄ™pnij na Twitter</a>
      <a id="share-telegram" href="#" target="_blank" rel="noopener">UdostÄ™pnij na Telegram</a>
    </div>
  </div>

  <div class="language-switcher">
    <button onclick="setLanguage('en')">ðŸ‡¬ðŸ‡§ English</button>
    <button onclick="setLanguage('pl')">ðŸ‡µðŸ‡± Polski</button>
  </div>

  <div class="container">
    <h1 data-en="Noktra Airdrop" data-pl="Airdrop Noktra">Noktra Airdrop</h1>
    <p class="description" data-en="Noktra is a decentralized community token built on Solana. No inflation. No limits. For the people."
       data-pl="Noktra to zdecentralizowany token spoÅ‚ecznoÅ›ciowy zbudowany na Solanie. Bez dodruku. Bez barier. Dla ludzi.">
       Noktra is a decentralized community token built on Solana. No inflation. No limits. For the people.
    </p>
    <div class="token-info">
      <p><strong data-en="Token" data-pl="Token">Token</strong>: NOK</p>
      <p><strong data-en="Total Supply" data-pl="PodaÅ¼">Total Supply</strong>: 1,000,000,000</p>
      <p><strong data-en="Network" data-pl="SieÄ‡">Network</strong>: Solana</p>
      <p><strong>Token Address:</strong>
        <a href="https://solscan.io/token/48QzG8RhntaiPjY7z3mPqaDiK8TxDKetBKAKMZr1TbL" target="_blank" rel="noopener" id="token-solscan">Solscan</a>
        <button type="button" id="copy-token" class="linklike" data-addr="48QzG8RhntaiPjY7z3mPqaDiK8TxDKetBKAKMZr1TbL">Kopiuj</button>
      </p>
    </div>

    <p id="counter" style="text-align:center; font-weight:bold; margin-top:0.5rem; color:#00ffcc;">ZgÅ‚oszeÅ„: 0</p>

    <form id="airdrop-form" autocomplete="off">
      <input type="text" id="address" placeholder="Solana Address" required
             inputmode="text" minlength="32" maxlength="60"
             pattern="[1-9A-HJ-NP-Za-km-z]{32,60}"
             title="Wklej poprawny adres Solana (base58, 32â€“60 znakÃ³w)" />
      <input type="text" id="twitter" placeholder="Twitter Username" required
             inputmode="text" maxlength="32" title="@username bez spacji"
             autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" />
      <input type="text" id="telegram" placeholder="Telegram Username" required
             inputmode="text" maxlength="32" title="@username bez spacji"
             autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" />
      <button type="submit" data-en="Submit to Airdrop" data-pl="ZgÅ‚oÅ› siÄ™ do airdropu">Submit to Airdrop</button>
    </form>
    <p id="message" aria-live="polite"></p>
    <div class="socials">
      <a href="https://phantom.app/" target="_blank" rel="noopener">Phantom Wallet</a> |
      <a href="https://x.com/Noktra1755" target="_blank" rel="noopener">Twitter</a> |
      <a href="https://t.me/Noktra_AirDrop" target="_blank" rel="noopener">Telegram</a>
    </div>
  </div>

  <script src="script.js" defer></script>

  <script>
    (function(){
      const backend = (typeof window!=='undefined' && window.NOKTRA_BACKEND_URL) ? String(window.NOKTRA_BACKEND_URL) : '';
      const keyCount = 'noktra-airdrop-count';
      const keySub = 'noktra-airdrop-submissions';

      function getLocalCount(){ return parseInt(localStorage.getItem(keyCount) || '0', 10); }
      function setLocalCount(v){ localStorage.setItem(keyCount, String(v)); }
      function renderCount(v){
        var el = document.getElementById('counter');
        if(!el) return;
        var n = (typeof v==='number') ? v : getLocalCount();
        el.textContent = 'ZgÅ‚oszeÅ„: ' + n;
      }
      async function fetchGlobal(){
        if(!backend) return;
        try{
          const r = await fetch(backend.replace(/\/$/,'') + '/count');
          if(!r.ok) return;
          const d = await r.json();
          if(typeof d.count === 'number'){ setLocalCount(d.count); renderCount(d.count); }
        }catch(_){}
      }
      function isValidAddr(a){ return !!a && a.length>=32 && a.length<=60 && /^[1-9A-HJ-NP-Za-km-z]+$/.test(a); }
      function getSubmitted(){ try{ return JSON.parse(localStorage.getItem(keySub)||'{}'); }catch{return {}} }
      function saveSubmitted(m){ localStorage.setItem(keySub, JSON.stringify(m)); }
      function setMsg(t,err){ var m=document.getElementById('message'); if(!m) return; m.textContent=t; m.style.color=err?'#ff6b6b':'#00ff88'; }

      document.addEventListener('DOMContentLoaded', function(){
        renderCount();
        fetchGlobal();

        var f = document.getElementById('airdrop-form');
        if(!f) return;

        f.addEventListener('submit', async function(e){
          e.preventDefault();
          var addr = document.getElementById('address')?.value.trim();
          var tw = document.getElementById('twitter')?.value.trim();
          var tg = document.getElementById('telegram')?.value.trim();

          if(!isValidAddr(addr)) return setMsg('NieprawidÅ‚owy adres Solana.', true);
          if(!tw || !tg) return setMsg('UzupeÅ‚nij Twitter oraz Telegram.', true);

          var submitted = getSubmitted();
          if(submitted[addr]) return setMsg('Ten adres juÅ¼ zÅ‚oÅ¼yÅ‚ zgÅ‚oszenie.', true);

          try{
            if(backend){
              const r = await fetch(backend.replace(/\/$/,'') + '/submit', {
                method:'POST', headers:{'Content-Type':'application/json'},
                body: JSON.stringify({ address: addr, twitter: tw, telegram: tg })
              });
              if(r.ok){
                const d = await r.json();
                if(d?.ok && typeof d.count==='number'){
                  submitted[addr] = { tw, tg, ts: Date.now() }; saveSubmitted(submitted);
                  setLocalCount(d.count); renderCount(d.count); f.reset(); return setMsg('ZgÅ‚oszenie przyjÄ™te. DziÄ™kujemy!', false);
                }
                if(d?.error==='duplicate') return setMsg('Ten adres juÅ¼ zÅ‚oÅ¼yÅ‚ zgÅ‚oszenie.', true);
              }
            }
          }catch(_){}

          submitted[addr] = { tw, tg, ts: Date.now() }; saveSubmitted(submitted);
          setLocalCount(getLocalCount()+1); renderCount(); f.reset(); setMsg('ZgÅ‚oszenie przyjÄ™te (lokalnie).', false);
        });
      });
    })();
  </script>

  <script>
    (function(){
      // Splash: najpierw samo tÅ‚o â†’ logo â†’ tekst â†’ wygaszenie
      document.addEventListener('DOMContentLoaded', function(){
        var splash=document.getElementById('splash'); if(!splash) return;
        setTimeout(function(){
          document.body.classList.add('splash-lock');
          splash.classList.add('show');
          setTimeout(function(){
            splash.classList.add('hide');
            document.body.classList.remove('splash-lock');
            setTimeout(function(){ splash.remove(); }, 900);
          }, 2800);
        }, 700);
      });
    })();
  </script>

  <script>
    (function(){
      // Skeleton for NFT images
      document.addEventListener('DOMContentLoaded', function(){
        document.querySelectorAll('.nft-card').forEach(function(card){
          const img=card.querySelector('img'); if(!img) return;
          card.classList.add('loading');
          if(img.complete){ card.classList.remove('loading'); return; }
          img.addEventListener('load', ()=>card.classList.remove('loading'));
          img.addEventListener('error', ()=>card.classList.remove('loading'));
        });
      });
    })();
  </script>

  <div id="toast"></div>
</body>
</html>
